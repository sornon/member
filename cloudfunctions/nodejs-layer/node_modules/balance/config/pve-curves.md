# pve-curves.json 字段说明

此文件控制 PVE（含秘境）战斗的全局节奏与敌人基线数值。`config-loader` 依据 `balanceVersion` 选择对应 profile，并与默认 `v1` 递归合并。

- `version`：默认版本标识。
- `profiles`：按版本定义的配置集合。
  - `v1`（完整默认配置）
    - `maxLevel`：PVE 角色/敌人的等级上限。
    - `roundLimit`：PVE 战斗最大回合数，超出后按平局处理。`simulator.js` 读取此值控制对战循环。【F:cloudfunctions/nodejs-layer/node_modules/balance/simulator.js†L37-L59】
    - `cooldownMs`：服务器判定战斗冷却时间（毫秒）。用于限制重复开战频率，相关提示文案见 `cooldownMessage`。
    - `cooldownMessage`：冷却期间向玩家展示的提示文案。
    - `secretRealm`：秘境模式专用配置。
      - `baseStats`：敌方基础属性模板（生命、攻击、防御、速度、命中/闪避、暴击、终伤、吸血、控制相关等），构造秘境敌人时以此为基线。
      - `tuning`：秘境难度调节参数。
        - `baseMultiplier`：楼层数值总体倍率基础值。
        - `floorGrowth`：每层递增的数值倍率（线性增长部分）。
        - `realmGrowth`：每个秘境章节（realm）提升的额外增幅。
        - `normal`：普通怪物的多属性系数，对应不同抗性/属性类型的倍率：
          - `base`：基础倍率；`primary`/`secondary`/`tertiary`：主、副、次要属性的加成；`off`：非针对属性；`weak`：克制下的衰减。
        - `boss`：首领怪系数，字段与 `normal` 类似但包含 `tertiary`。
        - `special`：特殊怪增益，`base` 为基础倍率、`growth` 为每层增幅、`boss` 为首领额外倍率。
        - `limits`：秘境敌人属性上限（暴击率、暴击伤害、终伤加成/减免、吸血、命中、闪避），生成敌人时需截断到此范围内。
  - `v2`（增量覆盖）
    - `roundLimit`：将最大回合数调低至 18。
    - `secretRealm.tuning.normal.primary`：普通怪主属性倍率降至 1.25，以降低前期强度。
    - `secretRealm.tuning.limits.finalDamageReduction`：终伤减免上限降至 0.5。

> 运行时通过 `getPveCurveConfig()` 读取，战斗模拟与秘境敌人生成都会引用上述字段，缺失部分会沿用 `v1` 默认值。【F:cloudfunctions/nodejs-layer/node_modules/balance/config-loader.js†L114-L184】【F:cloudfunctions/nodejs-layer/node_modules/balance/simulator.js†L37-L59】

## 主要字段的属性说明

### v1 顶层参数

| 属性名 | 中文含义 | 默认值 | 备注 |
| --- | --- | --- | --- |
| `maxLevel` | PVE 等级上限 | `100` | 控制秘境/剧情可出现的最高等级，防止生成超纲敌人 |
| `roundLimit` | 最大回合数 | `20`（`v2` 下调为 `18`） | 超出则判和局，限制战斗拉锯；下调用于加快节奏 |
| `cooldownMs` | 战斗冷却时间（毫秒） | `10000` | 限制玩家频繁开战，避免刷资源 |
| `cooldownMessage` | 冷却提示文案 | `"您的上一场战斗还没结束，请稍后再战"` | 冷却阶段反馈给玩家，提示等待时间 |

### secretRealm.baseStats（秘境敌人基线属性）

| 属性名 | 中文含义 | 默认值 | 备注 |
| --- | --- | --- | --- |
| `maxHp` | 最大生命值 | `920` | 敌方生命基线，用于算血量与容错 |
| `physicalAttack` | 物理攻击力 | `120` | 敌方物理输出基线，配合倍率形成伤害下限 |
| `magicAttack` | 魔法攻击力 | `120` | 敌方法术输出基线，保证法系与物理同阶 |
| `physicalDefense` | 物理防御力 | `68` | 敌方物理减伤基线，配合穿透/倍率截断 |
| `magicDefense` | 魔法防御力 | `65` | 敌方魔法减伤基线，略低于物防体现法系差异 |
| `speed` | 速度 | `82` | 影响敌方出手顺序，确保首轮节奏适中 |
| `accuracy` | 命中 | `118` | 敌方命中基线，对应玩家初始闪避保证命中率不为 0 |
| `dodge` | 闪避 | `88` | 敌方闪避基线，给命中公式留出命中空间 |
| `critRate` | 暴击率 | `0.06` | 敌方暴击概率起点，避免无暴击也不至过高 |
| `critDamage` | 暴击伤害 | `1.52` | 敌方暴击倍率起点，接近玩家基线保持公平 |
| `finalDamageBonus` | 终伤加成 | `0.025` | 敌方终伤增益基线，提供微量乘区提升 |
| `finalDamageReduction` | 终伤减免 | `0.035` | 敌方终伤减益基线，抵消部分玩家增伤 |
| `lifeSteal` | 吸血 | `0.015` | 敌方吸血起点，保障少量续航但低于上限 |
| `controlHit` | 控制命中 | `26` | 控制类命中基线，对应玩家控制抗性 11 留有命中余量 |
| `controlResist` | 控制抗性 | `18` | 抵抗控制基线，避免被控概率过高 |
| `physicalPenetration` | 物理穿透 | `9` | 敌方物防穿透起点，与基础防御配合控制减防 |
| `magicPenetration` | 魔法穿透 | `9` | 敌方魔防穿透起点，保证法系能打破基础防御 |

### secretRealm.tuning（秘境数值调节）

| 属性名 | 中文含义 | 默认值 | 备注 |
| --- | --- | --- | --- |
| `baseMultiplier` | 楼层数值整体倍率基础值 | `1` | 所有楼层的起始乘数，0 层即以此值开局 |
| `floorGrowth` | 每层递增倍率 | `0.08` | 每上升一层增加 8% 综合系数，控制线性爬坡 |
| `realmGrowth` | 每章递增倍率 | `0.34` | 每个秘境章节额外 +34% 强度，体现章节分段跳跃 |

### secretRealm.tuning.normal（普通怪物多属性系数）

| 属性名 | 中文含义 | 默认值 | 备注 |
| --- | --- | --- | --- |
| `base` | 基础倍率 | `1` | 普通怪默认倍率，未被克制/克制时的基准 |
| `primary` | 主属性倍率 | `1.35`（`v2` 为 `1.25`） | 主属性（克制方向）额外加成，v2 降低减缓前期压力 |
| `secondary` | 副属性倍率 | `1.15` | 次要属性加成，突出多属性但不至于过强 |
| `off` | 非针对属性倍率 | `0.98` | 克制关系外的通用倍率，小幅弱化保证克制凸显 |
| `weak` | 克制衰减倍率 | `0.85` | 被克制时的衰减，确保克制关系有明显反馈 |

### secretRealm.tuning.boss（首领怪物多属性系数）

| 属性名 | 中文含义 | 默认值 | 备注 |
| --- | --- | --- | --- |
| `base` | 基础倍率 | `1.22` | 首领基础倍率，高于普通怪体现压迫感 |
| `primary` | 主属性倍率 | `1.68` | 首领主属性加成，显著强化对应抗性/输出 |
| `secondary` | 副属性倍率 | `1.34` | 首领副属性加成，保证多段威胁 |
| `tertiary` | 次要属性倍率 | `1.15` | 首领次要属性加成，避免过度削弱非主属性 |
| `off` | 非针对属性倍率 | `1` | 非克制时倍率，保持与基础一致 |
| `weak` | 克制衰减倍率 | `0.88` | 被克制时衰减，仍保留首领压制力 |

### secretRealm.tuning.special（特殊怪物增益）

| 属性名 | 中文含义 | 默认值 | 备注 |
| --- | --- | --- | --- |
| `base` | 特殊怪基础倍率 | `1` | 特殊怪初始加成，与普通怪持平便于再叠加特性 |
| `growth` | 每层增幅 | `0.07` | 每层额外 +7% 强度，叠加在常规楼层成长之外 |
| `boss` | 特殊首领额外倍率 | `1.5` | 特殊首领额外提升 50%，强调主题机制 |

### secretRealm.tuning.limits（秘境敌人属性上限）

| 属性名 | 中文含义 | 默认值 | 备注 |
| --- | --- | --- | --- |
| `critRate` | 暴击率上限 | `0.45` | 限制暴击概率不超 45%，保证防御端有反制 |
| `critDamage` | 暴击伤害上限 | `2.15` | 限制暴击倍率不超 2.15，防止暴击一击必杀 |
| `finalDamageBonus` | 终伤加成上限 | `0.4` | 终伤增益封顶 +40%，与玩家上限一致维持公平 |
| `finalDamageReduction` | 终伤减免上限 | `0.55`（`v2` 下调为 `0.5`） | 上限 55%（v2 为 50%）防止出现无伤，兼顾减伤体验 |
| `lifeSteal` | 吸血上限 | `0.18` | 吸血比例封顶 18%，避免敌人无限续航 |
| `accuracy` | 命中属性上限 | `520` | 命中数值截断，防止命中叠高压制闪避 |
| `dodge` | 闪避属性上限 | `420` | 闪避数值截断，保留命中方的命中空间 |
