# pve-curves.json 字段说明

此文件控制 PVE（含秘境）战斗的全局节奏与敌人基线数值。`config-loader` 依据 `balanceVersion` 选择对应 profile，并与默认 `v1` 递归合并。

- `version`：默认版本标识。
- `profiles`：按版本定义的配置集合。
  - `v1`（完整默认配置）
    - `maxLevel`：PVE 角色/敌人的等级上限。
    - `roundLimit`：PVE 战斗最大回合数，超出后按平局处理。`simulator.js` 读取此值控制对战循环。【F:cloudfunctions/nodejs-layer/node_modules/balance/simulator.js†L37-L59】
    - `cooldownMs`：服务器判定战斗冷却时间（毫秒）。用于限制重复开战频率，相关提示文案见 `cooldownMessage`。
    - `cooldownMessage`：冷却期间向玩家展示的提示文案。
    - `secretRealm`：秘境模式专用配置。
      - `baseStats`：敌方基础属性模板（生命、攻击、防御、速度、命中/闪避、暴击、终伤、吸血、控制相关等），构造秘境敌人时以此为基线。
      - `tuning`：秘境难度调节参数。
        - `baseMultiplier`：楼层数值总体倍率基础值。
        - `floorGrowth`：每层递增的数值倍率（线性增长部分）。
        - `realmGrowth`：每个秘境章节（realm）提升的额外增幅。
        - `normal`：普通怪物的多属性系数，对应不同抗性/属性类型的倍率：
          - `base`：基础倍率；`primary`/`secondary`/`tertiary`：主、副、次要属性的加成；`off`：非针对属性；`weak`：克制下的衰减。
        - `boss`：首领怪系数，字段与 `normal` 类似但包含 `tertiary`。
        - `special`：特殊怪增益，`base` 为基础倍率、`growth` 为每层增幅、`boss` 为首领额外倍率。
        - `limits`：秘境敌人属性上限（暴击率、暴击伤害、终伤加成/减免、吸血、命中、闪避），生成敌人时需截断到此范围内。
  - `v2`（增量覆盖）
    - `roundLimit`：将最大回合数调低至 18。
    - `secretRealm.tuning.normal.primary`：普通怪主属性倍率降至 1.25，以降低前期强度。
    - `secretRealm.tuning.limits.finalDamageReduction`：终伤减免上限降至 0.5。

> 运行时通过 `getPveCurveConfig()` 读取，战斗模拟与秘境敌人生成都会引用上述字段，缺失部分会沿用 `v1` 默认值。【F:cloudfunctions/nodejs-layer/node_modules/balance/config-loader.js†L114-L184】【F:cloudfunctions/nodejs-layer/node_modules/balance/simulator.js†L37-L59】

## 主要字段的属性说明

### v1 顶层参数

| 属性名 | 中文含义 | 默认值 |
| --- | --- | --- |
| `maxLevel` | PVE 等级上限 | `100` |
| `roundLimit` | 最大回合数 | `20`（`v2` 下调为 `18`） |
| `cooldownMs` | 战斗冷却时间（毫秒） | `10000` |
| `cooldownMessage` | 冷却提示文案 | `"您的上一场战斗还没结束，请稍后再战"` |

### secretRealm.baseStats（秘境敌人基线属性）

| 属性名 | 中文含义 | 默认值 |
| --- | --- | --- |
| `maxHp` | 最大生命值 | `920` |
| `physicalAttack` | 物理攻击力 | `120` |
| `magicAttack` | 魔法攻击力 | `120` |
| `physicalDefense` | 物理防御力 | `68` |
| `magicDefense` | 魔法防御力 | `65` |
| `speed` | 速度 | `82` |
| `accuracy` | 命中 | `118` |
| `dodge` | 闪避 | `88` |
| `critRate` | 暴击率 | `0.06` |
| `critDamage` | 暴击伤害 | `1.52` |
| `finalDamageBonus` | 终伤加成 | `0.025` |
| `finalDamageReduction` | 终伤减免 | `0.035` |
| `lifeSteal` | 吸血 | `0.015` |
| `controlHit` | 控制命中 | `26` |
| `controlResist` | 控制抗性 | `18` |
| `physicalPenetration` | 物理穿透 | `9` |
| `magicPenetration` | 魔法穿透 | `9` |

### secretRealm.tuning（秘境数值调节）

| 属性名 | 中文含义 | 默认值 |
| --- | --- | --- |
| `baseMultiplier` | 楼层数值整体倍率基础值 | `1` |
| `floorGrowth` | 每层递增倍率 | `0.08` |
| `realmGrowth` | 每章递增倍率 | `0.34` |

### secretRealm.tuning.normal（普通怪物多属性系数）

| 属性名 | 中文含义 | 默认值 |
| --- | --- | --- |
| `base` | 基础倍率 | `1` |
| `primary` | 主属性倍率 | `1.35`（`v2` 为 `1.25`） |
| `secondary` | 副属性倍率 | `1.15` |
| `off` | 非针对属性倍率 | `0.98` |
| `weak` | 克制衰减倍率 | `0.85` |

### secretRealm.tuning.boss（首领怪物多属性系数）

| 属性名 | 中文含义 | 默认值 |
| --- | --- | --- |
| `base` | 基础倍率 | `1.22` |
| `primary` | 主属性倍率 | `1.68` |
| `secondary` | 副属性倍率 | `1.34` |
| `tertiary` | 次要属性倍率 | `1.15` |
| `off` | 非针对属性倍率 | `1` |
| `weak` | 克制衰减倍率 | `0.88` |

### secretRealm.tuning.special（特殊怪物增益）

| 属性名 | 中文含义 | 默认值 |
| --- | --- | --- |
| `base` | 特殊怪基础倍率 | `1` |
| `growth` | 每层增幅 | `0.07` |
| `boss` | 特殊首领额外倍率 | `1.5` |

### secretRealm.tuning.limits（秘境敌人属性上限）

| 属性名 | 中文含义 | 默认值 |
| --- | --- | --- |
| `critRate` | 暴击率上限 | `0.45` |
| `critDamage` | 暴击伤害上限 | `2.15` |
| `finalDamageBonus` | 终伤加成上限 | `0.4` |
| `finalDamageReduction` | 终伤减免上限 | `0.55`（`v2` 下调为 `0.5`） |
| `lifeSteal` | 吸血上限 | `0.18` |
| `accuracy` | 命中属性上限 | `520` |
| `dodge` | 闪避属性上限 | `420` |
