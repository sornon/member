# skill-curves.json 字段说明

此文件描述技能资源与控制效果的默认机制。`config-loader` 会按版本读取并与 `v1` 合并，供 skill-engine 创建角色运行时使用。

- `version`：默认版本标识。
- `profiles`：各版本配置集合。
  - `v1`（完整默认配置）
    - `resource`
      - `defaults`：技能资源（如怒气/真气）基础规则。
        - `type`：资源类型标识，默认 `qi`。
        - `baseMax`：资源槽最大值。
        - `startFraction`：开局按最大值的百分比获得的资源比例。
        - `startValue`：开局的资源固定值（与 `startFraction` 叠加）。
        - `turnGain`：每个回合自然回复的资源量。
        - `basicAttackGain`：普攻后获得的资源量。
        - `damageTakenGain`：受到伤害时的资源系数（乘以伤害量）。
        - `critGain`：造成暴击时额外获得的资源量。
        - `critTakenGain`：被暴击时额外获得的资源量。
    - `controlEffects`：各类控制效果的行为定义，skill-engine 会据此决定回合是否跳过、哪些动作被禁用等。
      - `stun`：眩晕。`summary`=描述文本；`skip`=true（整回合跳过）；`disableBasic`/`disableActive`/`disableDodge`=true，表示普攻、主动技能与闪避均被禁用。
      - `silence`：沉默。只禁止主动技能（`disableActive`=true），其他动作保留。
      - `freeze`：冰冻。与眩晕类似会跳过回合并禁用所有动作，附加 `breakOnFire`=true 表示受到火属性伤害会解除；`fireDamageMultiplier`=0.1 表示被火属性克制时伤害加成系数。
      - `sleep`：沉睡。跳过回合且禁用所有动作；`wakeOnDamage`=true 表示受击立即唤醒；`turnResourceGain`=10 表示沉睡回合仍会被动回复的资源量。
  - `v2`（增量覆盖）
    - `resource.defaults`：提升资源获取与初始资源比例（`turnGain`=24、`basicAttackGain`=12、`damageTakenGain`=1.8、`startFraction`=0.1）。
    - `controlEffects.sleep.turnResourceGain`：沉睡状态下的被动回复提升到 14。

> `createActorRuntime` 在构建角色时会引用这些资源与控制效果定义，确保技能、沉睡/冰冻等状态与配置保持一致。缺失字段会按 `v1` 补全。【F:cloudfunctions/nodejs-layer/node_modules/balance/config-loader.js†L40-L113】【F:cloudfunctions/nodejs-layer/node_modules/balance/config/skill-curves.json†L1-L38】

## 主要字段的属性说明

### resource.defaults（技能资源基线）

| 属性名 | 中文含义 | 默认值 | 备注 |
| --- | --- | --- | --- |
| `type` | 资源类型标识 | `"qi"` | 供技能消耗/回复引用的资源代号 |
| `baseMax` | 最大资源值 | `100` | 资源槽上限 |
| `startFraction` | 开局按最大值比例获得的资源 | `0`（`v2` 为 `0.1`） | 开局按上限百分比给的资源 |
| `startValue` | 开局固定资源值 | `0` | 开局的固定资源补足 |
| `turnGain` | 每回合自然回复 | `20`（`v2` 为 `24`） | 回合结束自动回复量 |
| `basicAttackGain` | 普攻后获得的资源 | `10`（`v2` 为 `12`） | 普攻命中后额外回复 |
| `damageTakenGain` | 受伤获得资源系数 | `1.5`（`v2` 为 `1.8`） | 按伤害量乘系数获得资源 |
| `critGain` | 造成暴击时额外获得的资源 | `1` | 暴击输出时额外奖励 |
| `critTakenGain` | 被暴击时额外获得的资源 | `1` | 被暴击时的补偿资源 |

### controlEffects（控制效果行为）

| 控制效果 | 字段 | 中文含义 | 默认值 | 备注 |
| --- | --- | --- | --- | --- |
| `stun` | `summary` | 状态描述 | `"眩晕"` | 显示用文案 |
| `stun` | `skip` | 是否跳过整回合 | `true` | 回合直接被跳过 |
| `stun` | `disableBasic` | 禁用普攻 | `true` | 眩晕下不可普攻 |
| `stun` | `disableActive` | 禁用主动技能 | `true` | 眩晕下不可释放技能 |
| `stun` | `disableDodge` | 禁用闪避 | `true` | 眩晕下不可闪避 |
| `silence` | `summary` | 状态描述 | `"沉默"` | 显示用文案 |
| `silence` | `skip` | 是否跳过整回合 | `false` | 仍可行动，只禁技能 |
| `silence` | `disableBasic` | 禁用普攻 | `false` | 普攻可用 |
| `silence` | `disableActive` | 禁用主动技能 | `true` | 主动技能不可用 |
| `silence` | `disableDodge` | 禁用闪避 | `false` | 闪避正常 |
| `freeze` | `summary` | 状态描述 | `"冰冻"` | 显示用文案 |
| `freeze` | `skip` | 是否跳过整回合 | `true` | 冰冻回合会跳过 |
| `freeze` | `disableBasic` | 禁用普攻 | `true` | 冰冻下不可普攻 |
| `freeze` | `disableActive` | 禁用主动技能 | `true` | 冰冻下不可释放技能 |
| `freeze` | `disableDodge` | 禁用闪避 | `true` | 冰冻下不可闪避 |
| `freeze` | `breakOnFire` | 受到火属性伤害是否解除 | `true` | 受火属性伤害可解除冰冻 |
| `freeze` | `fireDamageMultiplier` | 火属性克制时的额外伤害系数 | `0.1` | 冰冻被火克制时的加成倍率 |
| `sleep` | `summary` | 状态描述 | `"陷入沉睡"` | 显示用文案 |
| `sleep` | `skip` | 是否跳过整回合 | `true` | 睡眠回合会跳过 |
| `sleep` | `disableBasic` | 禁用普攻 | `true` | 睡眠下不可普攻 |
| `sleep` | `disableActive` | 禁用主动技能 | `true` | 睡眠下不可释放技能 |
| `sleep` | `disableDodge` | 禁用闪避 | `true` | 睡眠下不可闪避 |
| `sleep` | `wakeOnDamage` | 受击是否立即醒来 | `true` | 受到任意伤害会解除 |
| `sleep` | `turnResourceGain` | 睡眠回合仍然被动回复的资源量 | `10`（`v2` 为 `14`） | 控制睡眠时仍可被动回复多少资源 |
