# level-curves.json 字段说明

此文件定义基础战斗属性的默认值与若干公式边界。`config-loader` 会先读取对应 `profile`，缺失字段自动回退到默认 `v1`。主要结构：

- `version`：默认使用的版本标识。
- `profiles`：各版本配置。
  - `v1`（默认完整配置）
    - `defaults`
      - `combatStats`：角色基础战斗属性的初始值，缺省时 combat-system 会使用它们作为新角色属性基线并支持别名映射。【F:cloudfunctions/nodejs-layer/node_modules/combat-system/index.js†L4-L89】
        - 包含 `maxHp`、`physicalAttack`、`magicAttack`、`physicalDefense`、`magicDefense`、`speed`、`accuracy`、`dodge`、`critRate`、`critDamage`、`finalDamageBonus`、`finalDamageReduction`、`lifeSteal`、`healingBonus`、`healingReduction`、`controlHit`、`controlResist`、`physicalPenetration`、`magicPenetration`、`critResist`、`comboRate`、`block`、`counterRate`、`damageReduction`、`healingReceived`、`rageGain`、`controlStrength`、`shieldPower`、`summonPower`、`elementalVulnerability` 等所有基础数值，各字段含义与战斗公式同名参数一致。
      - `specialStats`：特殊状态类属性默认值，供角色初始化使用，字段包括 `shield`、`bonusDamage`、`dodgeChance`、`healOnHit`、`healOnKill`、`damageReflection`、`accuracyBonus`、`speedBonus`、`physicalPenetrationBonus`、`magicPenetrationBonus`。
    - `hitFormula`：命中概率公式参数，提供 `base`（基础命中率）、`slope`（命中随等级或命中属性的增长斜率）、`min`、`max`（结果上下限）。
    - `penetration`：穿透系数控制，`scale` 为穿透属性对减防效果的转化比例，`max` 为减防率上限。
    - `baseDamage`：基础伤害浮动控制，`minAttackRatio` 为最低攻击占比，`randomMin` 与 `randomRange` 控制随机浮动区间，`minDamage` 为保底伤害。
    - `crit`：暴击率与暴击伤害的边界，`min`/`max` 为暴击触发概率范围，`damageMin` 为暴击伤害倍率下限。
    - `finalDamage`：终伤加成/减免相关的截断配置，`minMultiplier` 为终伤下限，`bonusClamp`/`reductionClamp` 分别定义终伤加成与减免的最小/最大值。
    - `healing`：治疗与吸血相关限制，`lifeStealMax` 为吸血上限，`healingBonusClamp`、`healingReductionClamp`、`healingReceivedClamp` 控制各项治疗系数的上下限。
    - `mitigation`：减伤率上限，字段 `damageReductionMax`。
    - `procCaps`：触发类属性上限，包含 `comboRateMax`、`blockMax`、`counterRateMax`。
    - `specialCaps`：特殊效果上限，如 `dodgeChanceMax`、`damageReflectionMax`。
    - `statFloors`：关键属性的下限设置，目前包含 `critDamageMin`（暴击伤害下限），供战斗公式截断使用。【F:cloudfunctions/nodejs-layer/node_modules/combat-system/index.js†L67-L130】
  - `v2`（相对 v1 的增量覆盖）
    - `defaults`：空对象，表示沿用 v1 默认属性。
    - `hitFormula`：仅覆盖 `base`，将基础命中率提升至 0.87。
    - `baseDamage`：调整伤害浮动范围（`randomMin`=0.95，`randomRange`=0.22）。
    - `crit`：提高暴击下限（`min`=0.07）。

> 运行时通过 `getLevelCurveConfig()` 读取，未配置字段会回退到上述默认值，以确保战斗公式具备安全的上下限。配置还会被 combat-system 用于计算属性界限与截断。【F:cloudfunctions/nodejs-layer/node_modules/balance/config-loader.js†L8-L75】【F:cloudfunctions/nodejs-layer/node_modules/combat-system/index.js†L91-L132】
