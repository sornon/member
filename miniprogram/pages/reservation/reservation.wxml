<custom-nav title="预约包房" theme="dark"></custom-nav>
<view class="container">
  <view class="card filter-card">
    <view class="section-title">选择日期与时间</view>
    <picker mode="date" value="{{date}}" bindchange="handleDateChange">
      <view class="picker">预约日期：{{date}}</view>
    </picker>
    <picker mode="time" value="{{startTime}}" start="00:00" end="23:59" bindchange="handleStartTimeChange">
      <view class="picker">开始时间：{{startTime}}</view>
    </picker>
    <picker mode="time" value="{{endTime}}" start="00:00" end="23:59" bindchange="handleEndTimeChange">
      <view class="picker">结束时间：{{endTime}}</view>
    </picker>
    <view wx:if="{{timeError}}" class="time-error">{{timeError}}</view>
  </view>

  <view class="card">
    <view class="section-title">可预约包房</view>
    <view wx:if="{{loading}}">加载中...</view>
    <view wx:elif="{{!rooms.length}}" class="empty-state">所选时段暂无空闲包房</view>
    <view wx:else>
      <view class="room" wx:for="{{rooms}}" wx:key="_id">
        <view class="room-info">
          <view class="room-name">{{item.name}}</view>
          <view class="room-capacity">可容纳：{{item.capacity}} 人</view>
          <view class="room-facilities">设施：{{item.facilities}}</view>
          <view class="room-price">{{item.isFree ? '权益免费使用' : formatCurrency(item.price)}}</view>
        </view>
        <button size="mini" type="primary" loading="{{submitting}}" data-room="{{item}}" bindtap="handleReserve">预约</button>
      </view>
    </view>
  </view>
</view>
