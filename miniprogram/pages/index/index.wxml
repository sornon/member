<view class="container">
  <view wx:if="{{loading}}" class="card">
    <text>加载中...</text>
  </view>

  <view wx:if="{{member}}" class="card">
    <view class="flex-between">
      <view>
        <view class="section-title">{{member.nickName ? member.nickName : '仙友'}}</view>
        <view class="badge" style="background: rgba(123, 97, 255, 0.16); color: #5b5cf1;">
          当前境界：{{member.level ? member.level.name : '练气'}}
        </view>
      </view>
      <view>
        <text class="balance">余额 {{formatCurrency(member.balance || 0)}}</text>
      </view>
    </view>
    <view class="progress">
      <view class="progress-bar">
        <view class="progress-inner" style="width: {{progress ? progress.percentage : 0}}%;"></view>
      </view>
      <view class="progress-text">
        <text>距离下个境界还需 {{progress ? progress.nextDiff : 0}} 经验</text>
      </view>
    </view>
  </view>

  <view class="card">
    <view class="section-title">快速入口</view>
    <view class="shortcut-grid">
      <view class="shortcut" wx:for="{{shortcuts}}" wx:key="label" data-url="{{item.url}}" bindtap="handleShortcutTap">
        <view class="shortcut-icon">{{item.icon}}</view>
        <view class="shortcut-label">{{item.label}}</view>
      </view>
    </view>
  </view>

  <view class="card">
    <view class="flex-between">
      <view class="section-title">今日任务</view>
      <navigator url="/pages/tasks/tasks" class="more">全部</navigator>
    </view>
    <view wx:if="{{tasks.length}}">
      <view class="task-item" wx:for="{{tasks}}" wx:key="_id">
        <view>
          <view class="task-title">{{item.title}}</view>
          <view class="task-desc">{{item.description}}</view>
        </view>
        <view class="task-reward">奖励：{{item.rewardSummary}}</view>
      </view>
    </view>
    <view wx:else class="empty-state">今日暂无任务，敬请期待</view>
  </view>
</view>
